@model ApplicationCore.Models.MovieDetailsModel

<div class="container mt-5">
    <div class="row">
        <div class="col-md-4">
            <img src="@Model.PosterUrl" alt="@Model.Title" class="img-flud rounded" />
        </div>

        <div class="col-md-4">
            <h1>@Model.Title</h1>

            <p>
                <strong>Genre:</strong>
                @foreach (var genre in Model.Genres)
                {
                    <span class="me-2">@genre.Name</span>
                }
            </p>

            <p class="mt-3">
                <strong>Ratings:</strong>
                @foreach (var review in Model.Reviews ?? Enumerable.Empty<ApplicationCore.Entities.Review>())
                {
                    <span class="badge bg-secondary">@review.Rating</span>
                }
            </p>

            <p class="mt-3">
                <strong>Overview:</strong>
                @Model.Overview
            </p>
        </div>

        <div class="col-md-4 d-flex flex-column">

            <button type="button"
                    class="btn bg-danger mb-2 w-50"
                    data-bs-toggle="modal"
                    data-bs-target="#buyMovieModal">
                Buy Movie
            </button>

            <button type="button"
                    class="btn btn-primary w-50"
                    data-bs-toggle="modal"
                    data-bs-target="#leaveReviewModal">
                Leave Review
            </button>

        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <h3 class="mb-3 mt-2">Movie Facts</h3>

            <ul class="list-group shadow-sm">

                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><i class="bi bi-cash-stack me-2 text-success"></i>Revenue:</span>
                    <strong>@Model.Revenue?.ToString("C0")</strong>
                </li>

                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><i class="bi bi-translate me-2 text-primary"></i>Language:</span>
                    <strong>@Model.OriginalLanguage?.ToUpper()</strong>
                </li>

                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <span><i class="bi bi-calendar-event me-2 text-danger"></i>Release Date:</span>
                    <strong>@Model.ReleaseDate?.ToString("yyyy-MM-dd")</strong>
                </li>

            </ul>
        
            <div class="mt-4">
                <h3 class="mb-3">Trailers</h3>

                <ul class="list-group shadow-sm">

                    @if (Model.Trailers != null && Model.Trailers.Any())
                    {
                        @foreach (var trailer in Model.Trailers)
                        {
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <i class="bi bi-play-circle-fill text-danger me-2"></i>
                                    @trailer.Name
                                </div>

                                <a href="@trailer.TrailerUrl"
                                   target="_blank"
                                   class="btn btn-sm btn-outline-primary">
                                    Watch
                                </a>
                            </li>
                        }
                    }
                    else
                    {
                        <li class="list-group-item text-muted">
                            No trailers available.
                        </li>
                    }
                </ul>
            </div>
        </div>
        <div class="col-md-6">
            <h3 class="mb-3 mt-2">Cast</h3>

            <div class="list-group shadow-sm">

                @if (Model.Casts != null && Model.Casts.Any())
                {
                    @foreach (var cast in Model.Casts)
                    {
                        <a asp-controller="Casts"
                           asp-action="CastDetails"
                           asp-route-id="@cast.Id"
                           class="list-group-item list-group-item-action d-flex align-items-center">

                            <!-- Thumbnail -->
                            <img src="@cast.ProfilePath"
                                 alt="@cast.Name"
                                 class="rounded-circle me-3"
                                 style="width: 45px; height: 45px; object-fit: cover;" />

                            <!-- Name -->
                            <span class="small fw-semibold">
                                @cast.Name
                            </span>

                        </a>
                    }
                }
                else
                {
                    <div class="list-group-item text-muted">
                        No cast information available.
                    </div>
                }

            </div>
        </div>
    </div>
</div>

<partial name="_BuyMovieModal" model="Model" />
<partial name="_LeaveReviewModal" model="Model" />

